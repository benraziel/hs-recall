"use strict";angular.module("hearthstoneApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap","ngTouch","angular-carousel"]);var hsApp=angular.module("hearthstoneApp");hsApp.controller("MainCtrl",["$scope","$http","HearthstoneService","$timeout","$modal",function(a,b,c){a.categories=["Reward","Promotion","Expert","Basic","Curse of Naxxramas"],c.getData().then(function(b){a.allCards=c.flattenJson(b,a.categories),a.cards=c.shuffle(a.allCards),a.activeFilter={category:{Basic:!0,Expert:!0,"Curse of Naxxramas":!0,Reward:!0,Promotion:!0},"class":{Neutral:!0,Mage:!0,Warrior:!0,Shaman:!0,Priest:!0,Paladin:!0,Druid:!0,Hunter:!0,Warlock:!0,Rogue:!0},rarity:[{checked:!0,title:"Free",color:"#000000"},{checked:!0,title:"Common",color:"#939393"},{checked:!0,title:"Rare",color:"#0070dd"},{checked:!0,title:"Epic",color:"#a335ee"},{checked:!0,title:"Legendary",color:"#ff8000"}],type:{Minion:!0,Spell:!0,Weapon:!0}}}),a.loadFilters=function(){a.prevFilter=JSON.parse(JSON.stringify(a.activeFilter))},a.activeFilter=function(){return a.activeFilter},a.changeFilter=function(){JSON.stringify(a.prevFilter)!=JSON.stringify(a.activeFilter)&&(a.cards=c.shuffle(c.filterCards(a.allCards,a.activeFilter)))}}]),angular.module("hearthstoneApp").factory("HearthstoneService",["$http",function(a){var b={getData:function(){var b=a.get("AllSets.json").then(function(a){return a.data});return b},flattenJson:function(a,b){for(var c=[],d=["Enchantment","Hero"],e=0;e<b.length;e++){var f=a[b[e]];f.forEach(function(a){var f=-1!==d.indexOf(a.type),g=a.collectible!==!0;f||g||(a.playerClass||(a.playerClass="Neutral"),a.category=b[e],a.active=!1,c.push(a))})}return c},getRarityValue:function(a,b){var c=!1;return a.forEach(function(a){a.title===b&&(c=a.checked)}),c},filterCards:function(a,c){var d=[];return a.forEach(function(a){c.type[a.type]&&(c.class[a.playerClass]||c.class.Neutral)&&c.category[a.category]&&b.getRarityValue(c.rarity,a.rarity)&&d.push(a)}),d},shuffle:function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}};return b}]);