"use strict";angular.module("hearthstoneApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]),angular.module("hearthstoneApp").controller("MainCtrl",["$scope","$http","HearthstoneService","$timeout",function(a,b,c,d){a.categories=["Reward","Promotion","Expert","Basic","Curse of Naxxramas"],a.errorMessage=!1,c.getData().then(function(b){a.cards=c.flattenJson(b,a.categories),a.cardPositions=c.generateCardList(a.cards.length),a.currentPosition=0,a.currentCard=a.cards[a.cardPositions[0]]}),a.nextCard=function(){a.currentPosition===a.cardPositions.length-1?a.currentPosition=0:a.currentPosition++,a.goToCard(a.currentPosition)},a.prevCard=function(){0===a.currentPosition?a.currentPosition=a.cardPositions.length-1:a.currentPosition--,a.goToCard(a.currentPosition)},a.goToCard=function(b){var c=a.active?600:0;a.active=!1,d(function(){var c=a.cardPositions[b];a.currentCard=a.cards[c]},c)}}]),angular.module("hearthstoneApp").factory("HearthstoneService",["$http",function(a){var b={getData:function(){var b=a.get("AllSets.json").then(function(a){return a.data});return b},flattenJson:function(a,b){for(var c=[],d=["Enchantment","Hero"],e=0;e<b.length;e++){var f=a[b[e]];f.forEach(function(a){var f=-1!==d.indexOf(a.type),g=a.collectible!==!0;f||g||(a.category=b[e],c.push(a))})}return c},generateCardList:function(a){for(var b=[],c=0;a>c;c++){var d=Math.floor(Math.random()*a);b.push(d)}return b},getLastCard:function(a){return b.usedCardList[a.index-1]},getPrevCard:function(a){return b.usedCardList[a.index-1]}};return b}]);